/* leaflet-focusmarker 0.0.1 (git://github.com/keta/leaflet-focusmarker.git) */
!function(){"use strict";L.FocusMarker=L.CircleMarker.extend({options:{clickable:!1,keyboard:!1,dispose:!0,radius:40,color:"#f22",opacity:.8,duration:20},initialize:function(){L.CircleMarker.prototype.initialize.apply(this,arguments),this._baseRadius=this.options.radius,this._baseOpacity=this.options.opacity,this.options.radius=0,this.options.opacity=0},onAdd:function(){L.CircleMarker.prototype.onAdd.apply(this,arguments),this.animate()},removeFrom:function(a){return a.removeLayer(this),this},setLatLng:function(){return L.CircleMarker.prototype.setLatLng.apply(this,arguments),this._map&&this.animate(),this},show:function(){return this._map&&(this.redraw(),this.animate()),this},animate:function(){this._stopAnimation();var a=this._baseRadius,b=this._baseOpacity,c=b/a,d=this,e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,d.options.duration)},f=function(){d._map&&(a=Math.max(0,a-.4),b=Math.max(0,b-c),d.setStyle({radius:a,opacity:b}),b||a?d._animation=e(f):(d.fire("animationend"),d.options.dispose&&d._map.removeLayer(d)))};f()},_stopAnimation:function(){if(this._animation){var a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||clearTimeout;a(this._animation)}}}),L.focusMarker=function(a,b){return new L.FocusMarker(a,b)},L.Marker.Focus=L.FocusMarker,L.marker.focus=L.focusMarker}();